<% # Make sure to include the public/javascripts/Grader/file_selector.js 
   # file when using this partial 
%>
<div id="file_selector">
<%= form_tag({:action => "download"}) if can_download %>
  Submission File: 
  <button onClick="bump_select($('select_file_id'), -1); return false;"><-</button>
  <select id="select_file_id" name="select_file_id" onChange="if ($(this).getValue() != '') { load_submitted_file($(this).getValue()); }">
    <% if files.empty? %>
      <option value="">[No files in repository]</option>
    <% end %>
    <% files.each do |file| %>
        <option value="<%= h(file.id) %>">
          <%= h(File.join(file.path, file.filename)) %>
        </option>
    <% end %>
  </select>  
  <button onClick="bump_select($('select_file_id'), 1); return false;">-></button>
  <span id="loading_code" style="display:none;">
    <%=image_tag('spinner.gif')%> Loading Code...
  </span>
   <%= submit_tag "Download" if can_download && !files.empty? %>
<%= "</form>" if can_download%>
  
</div>
