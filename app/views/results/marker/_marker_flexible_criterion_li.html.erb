<%
# Erb template for display flexible criterion in the grader view
%>

<li class="<%= cycle('mark_criterion_holder_A', 'mark_criterion_holder_B') %>" id="<%= "flexible_criterion_#{mark_criterion.id}" %>">
<!--Mark update info -->
<div id="mark_verify_result_<%=mark.id%>" class="error" style="display:none;" ><%= I18n.t("marker.marks.invalid_mark") %></div>
<div class="criterion_title" id="<%= "mark_criterion_title_#{mark_criterion.id}"%>" onclick="<%="focus_mark_criterion(#{mark_criterion.id})"%>">
<div id="<%="mark_criterion_title_#{mark_criterion.id}_expand"%>"
class="float_left flexible_criterion_expand expanded" >- &nbsp;
</div>
<div id="<%="mark_criterion_title_#{mark_criterion.id}_name"%>"
class="mark_criterion_title_div_level float_left">
  <b><%=h(mark_criterion.flexible_criterion_name)%></b>
</div>
<div id="mark_flexible_<%=mark.id%>" class="float_right" >
    <%= text_field_tag('mark_' + mark.id.to_s, mark.mark,:size=>4, :class=>'mark_grade_input') %>
	/&nbsp; <span id="mark_flexible_max_<%=mark.id%>"><%= mark_criterion.max.to_s%> </span>
	<script type="text/javascript">
	//<![CDATA[

	  // Prevents click from expanding/collapsing Criterion
	  $('mark_<%=mark.id.to_s%>').observe('click', function(event){
	    event.stop();
	  });
        //]]>
	</script>
    <%= observe_field 'mark_' + mark.id.to_s,
                          :url => {:action => :update_mark, :mark_id=>mark.id},
                          :with => "'mark=' + encodeURIComponent(value) "
                          %>
</div>
<div class="clear"></div>
  <div id="<%="mark_criterion_inputs_#{mark_criterion.id}"%>" class="mark_criterion_level_container" >
    <div class="float_left" >
      <%=mark_criterion.description %>
    </div>
  </div>
<div class="clear"></div>
</div>

</li>
