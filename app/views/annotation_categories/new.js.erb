(function () {
  $('#annotation_category_pane_list').prepend(
    "<%= escape_javascript("#{render partial: 'new_annotation_category',
                                     locals: { assignment_id: @assignment.id }}").html_safe %>");
  let new_category_form = document.getElementById('add_annotation_category');
  new_category_form.getElementsByTagName('input')[0].focus();

  new_category_form.addEventListener('ajax:success', (event) => {
    ajax_events.renderFlash(event, event.detail[2]);
    $('#add_annotation_category').remove()
  });
})();
