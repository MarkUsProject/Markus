resultComponent.addAnnotation({
  id: <%= @annotation.id %>,
  creator: '<%= "#{@annotation.creator.first_name} #{@annotation.creator.last_name}" %>',
  filename: '<%= @annotation.submission_file.filename %>',
  path: '<%= @annotation.submission_file.path.split('/', 2)[1] %>',
  submission_file_id: <%= @annotation.submission_file_id %>,
  content: '<%= @annotation.annotation_text.escape_content %>',
  annotation_category: '<%= @annotation.annotation_text.annotation_category&.annotation_category_name %>',
  annotation_text_id: <%= @annotation.annotation_text_id %>,
  type: '<%= @annotation.class.name %>',
  number: <%= @annotation.annotation_number %>,
  is_remark: <%= @annotation.is_remark %>,
  line_start: <%= @annotation.line_start || 'undefined' %>,
  line_end: <%= @annotation.line_end || 'undefined' %>,
  column_start: <%= @annotation.column_start || 'undefined' %>,
  column_end: <%= @annotation.column_end || 'undefined' %>,
  page: <%= @annotation.page || 'undefined' %>,
  x_range: {
    start: <%= [@annotation.x1, @annotation.x2].min || 'undefined' %>,
    end: <%= [@annotation.x1, @annotation.x2].max || 'undefined' %>
  },
  y_range: {
    start: <%= [@annotation.y1, @annotation.y2].min || 'undefined' %>,
    end: <%= [@annotation.y1, @annotation.y2].max || 'undefined' %>
  }
},
<%= @criterion_id %>,
  <%= @new_mark %>
);

hide_all_annotation_content_editors();
reloadDOM();
