<% content_for :head do %>
  <%= stylesheet_link_tag("livepipe/tabs") %>
<% end %>

<% # UI LIBRARIES %>
<%= javascript_include_tag "livepipe/livepipe.js",
  "livepipe/window.js",
  "livepipe/tabs.js" %>

<tr>
    <th>
    </th>

    <% if @submission_col_header[:col1] %>
    <th class="<%="ap_sorting_by" if (sort_by == 'group_name')%>
                <%="ap_sorting_by_desc" if (sort_by == 'group_name' && !desc.blank?)%>">
      <%= link_to I18n.t("browse_submissions.group_name"),
              :id => assignment.id,
              :filter => filter,
              :page => page,
              :per_page => per_page,
              :sort_by => 'group_name',
              :visible => true,
              :desc => (sort_by == 'group_name' && desc.blank?) %>
    </th>
    <% end %>

    <% if @submission_col_header[:col2] %>
    <th>
    <% if assignment.group_assignment? %>
      <%= I18n.t("browse_submissions.group_members") %>
    <% else %>
      <%= I18n.t("browse_submissions.student_name") %>
   <% end %>
    </th>
   <% end %>
   
    </th>

    <% if @submission_col_header[:col3] %>
    <th class="<%="ap_sorting_by" if (sort_by == 'repo_name')%>
                <%="ap_sorting_by_desc" if (sort_by == 'repo_name' && !desc.blank?)%>">
      <%= link_to I18n.t("browse_submissions.repository"),
              :id => assignment.id,
              :filter => filter,
              :page => page,
              :per_page => per_page,
              :sort_by => 'repo_name',
              :desc => (sort_by == 'repo_name' && desc.blank?) %>
    </th>
   <% end %>
    
    <% if @submission_col_header[:col4] %>
    <th class="<%="ap_sorting_by" if (sort_by == 'revision_timestamp')%>
                <%="ap_sorting_by_desc" if (sort_by == 'revision_timestamp' && !desc.blank?)%>">
      <%= link_to I18n.t("browse_submissions.commit_date"),
              :id => assignment.id,
              :filter => filter,
              :page => page,
              :per_page => per_page,
              :sort_by => 'revision_timestamp',
              :desc => (sort_by == 'revision_timestamp' && desc.blank?) %>
    </th>
    <% end %>
    <% if @submission_col_header[:col5] %>
    <th class="<%="ap_sorting_by" if (sort_by == 'marking_state')%>
                <%="ap_sorting_by_desc" if (sort_by == 'marking_state' && !desc.blank?)%>">
      <%= link_to I18n.t("browse_submissions.marking_state"),
              :id => assignment.id,
              :filter => filter,
              :page => page,
              :per_page => per_page,
              :sort_by => 'marking_state',
              :desc => (sort_by == 'marking_state' && desc.blank?) %>
    </th>
    <% end %>

    <% if @submission_col_header[:col6] %>
    <th class="<%="ap_sorting_by" if (sort_by == 'grace_credits_used')%>
                <%="ap_sorting_by_desc" if (sort_by == 'grace_credits_used' && !desc.blank?)%>">
      <%= link_to I18n.t("browse_submissions.grace_credits_used"),
              :id => assignment.id,
              :filter => filter,
              :page => page,
              :per_page => per_page,
              :sort_by => 'grace_credits_used',
              :desc => (sort_by == 'grace_credits_used' && desc.blank?) %>
    </th>
    <% end %>

    <% if @submission_col_header[:col7] %>
    <th class="<%="ap_sorting_by" if (sort_by == 'total_mark')%>
                <%="ap_sorting_by_desc" if (sort_by == 'total_mark' && !desc.blank?)%>">
      <%= link_to I18n.t("browse_submissions.final_grade"),
              :id => assignment.id,
              :filter => filter,
              :page => page,
              :per_page => per_page,
              :sort_by => 'total_mark',
              :desc => (sort_by == 'total_mark' && desc.blank?) %>
    </th>
   <% end %>

    <% if @submission_col_header[:col8] %>
    <% if assignment.section_groups_only %>
    <th class="<%="ap_sorting_by" if (sort_by == 'section')%>
    	        <%="ap_sorting_by_desc" if (sort_by == 'section' && !desc.blank?)%>">
      <%= link_to I18n.t("browse_submissions.section"),
              :id => assignment.id,
              :filter => filter,
              :page => page,
              :per_page => per_page,
              :sort_by => 'section',
              :desc => (sort_by == 'section' && desc.blank?) %>
    </th>
    <% end %>
    <% end %>

    <% if @submission_col_header[:col9] %>
    <th>
      <%= I18n.t("browse_submissions.can_begin_grading") %>
    </th>
    <% end %>

<th> 
 <%= link_to(image_tag("/images/icons/edit.png",
          :alt => I18n.t("browse_submissions.column_filter"),
          :title => I18n.t("browse_submissions.column_filter"),
          :id => "column_filter_icon"),
          column_filter_assignment_submissions_path(),
          :remote => true) %>
</th>

  </tr>
