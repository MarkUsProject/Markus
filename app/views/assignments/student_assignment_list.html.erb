<%= content_for :head do %>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      makeCourseSummaryTable(document.getElementById('course_summaries_table'),
                             { student: <%= @current_user.student? %> });
    });
  </script>
<% end %>

<% content_for :title, t('menu.home') %>

<div class='section'>
  <h3><%= Assignment.model_name.human.pluralize %></h3>
  <%= render partial: 'assignments/list', locals: {
    assessments: Assignment.where(is_hidden: false)
                           .includes(:pr_assignment)
                           .order(:id)
                           .select { |a| a.upcoming(@current_user) }
  } %>
</div>

<div class='section'>
  <h3><%= GradeEntryForm.model_name.human.pluralize %></h3>
  <%= render partial: 'assignments/list',
             locals: { assessments: Assignment.where(is_hidden: false)
                                              .includes(:pr_assignment)
                                              .order(:id)
                                              .select { |a| !a.upcoming(@current_user) },
                       grade_tables: GradeEntryForm.where(is_hidden: false).order(:id) } %>
</div>

<div class='section'>
  <h3><%= t('course_summary.student_title') %></h3>
  <div id='course_summaries_table'></div>
</div>
