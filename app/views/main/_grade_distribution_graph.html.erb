<canvas id='assignment_<%= assignment.id %>' width='420' height='350'></canvas>

<script>
//<![CDATA[
  // Set up graph
  var ctx = document.getElementById('assignment_<%= assignment.id %>').getContext('2d');

  // Set up labels
  var intervals = 20;
  var steps = 100 / intervals; // number of percentage steps in each interval
  var lab = []
  for (var i = 0; i < intervals; i++) {
    if (i == 0) {
      lower = 0;
    } else {
      lower = 1 + i * steps;
    }
    upper = (i + 1) * steps;
    lab[i] = lower + '% - ' + upper + '%';
  }

  var data = {
    labels : lab,
    datasets : [
      {
        fillColor : 'rgba(151,187,205,0.5)',
        strokeColor : 'rgba(151,187,205,1)',
        data : <%= assignment.assignment_stat.grade_distribution_array %>
      }
    ]
  };

  var options = {
    scaleLineWidth : 2,
    barStrokeWidth : 1,
    barValueSpacing : 2,
    animationSteps : 50
  }

  // Draw it
  new Chart(ctx).Bar(data, options);
//]]>
</script>
