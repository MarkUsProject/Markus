<div class="test_support_file">
<%= form.fields_for :test_support_files, test_support_file do |f| %>

    <% if !f.object.new_record? %>
      <%# Test Support File already exists %>
      <fieldset>
        <legend> <%= f.object.file_name %> </legend>
        <div class="settings_left_side">
          <%= f.label :description, t('automated_tests.script_option.description'), :style => 'vertical-align:top;' %>
          <%= f.text_area :description, :value => f.object.description, :cols => 30, :rows => 3 %> 
        </div>
        <div>
          <%= f.label :file_name, t('automated_tests.replace') %>
          <%= f.file_field :file_name, :size=>"30" %><br/>

          <span class="label">
            <%= link_to(t(:download),
                        :action => 'download', 
                        :assignment_id => @assignment.id,
                        :type => 'support',
                        :filename => f.object.file_name) %>
          </span>
          <br/>

          <%= f.label :_destroy, t('automated_tests.remove_file') %> 
          <%= f.check_box :_destroy %>

        </div>
      </fieldset>

    <% else %>
      <%# Test Support File does not exist -- it is new %>
        <%= raw t('automated_tests.upload_required') %>
        <%= f.file_field :file_name, :size=>"30" %>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;

        <%= t('automated_tests.script_option.description') %>
        <%= f.text_area :description,
                        :cols => 30, :rows => 1,
                        :style => "vertical-align:middle;" %> 

        <%= link_to_function I18n.t(:remove), "jQuery(this).closest('.test_support_file').remove()" %>
    <% end %>

<% end %>
</div>
