<% content_for :head do %>
    <%= javascript_include_tag 'FlexibleCriteria/index' %>

    <%= render partial: 'boot',
               formats: [:js],
               handlers: [:erb] %>
<% end %>

<!--The title bar for the page-->
<div class='title_bar'>
  <h1>
    <%= t('tags.title',
          assignment_short_identifier: @assignment.short_identifier) %>
  </h1>
</div>

<!--The buttons for creating tags, uploading and downloading-->
<div class='heading_buttons'>
  <%= link_to_function t('tags.create_new'), 'modal_create_new.open()' %>
  <span class='menu_bar'></span>
  <%= link_to_function t('tags.download_csv'), 'modal_download.open()' %>
  <span class='menu_bar'></span>
  <%= link_to_function t('tags.upload_csv'), 'modal_upload_csv.open()' %>
</div>

<!--Modal dialogs for creating, uploading and downloading tags-->
<aside class='dialog' id='create_new_dialog'>
  <h1><%= t('tags.create_new') %></h1>
  <p><%= t('rubric_criteria.upload.yml_prompt') %></p>
  <%= form_for :create_new,
               url: assignment_tags_path(@assignment),
               html: { multipart: true, size: 1 } do |f| %>
      <div>
        <p><%= f.text_field :name %></p>
        <%= t('rubric_criteria.upload.format_yml_html') %>
      </div>
      <div>
        <%= t('encoding') %>
        <%= select_tag(:encoding, options_for_select(@encodings)) %>
      </div>

      <section class='dialog-actions'>
        <%= f.submit t(:upload),
                     data: { disable_with: t(:uploading_please_wait) } %>
        <input type='reset'
               value='<%= t(:cancel) %>'
               onclick='modal_create_new.close();'>
      </section>
  <% end %>
</aside>
