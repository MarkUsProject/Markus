<% [:error, :success, :warning, :notice].each do |key| -%>
  <% unless flash[key].nil? -%>
    <% if flash[key].is_a?(Array) -%>
      <% flash[key].each do |msg| -%>
        <%= content_tag :div, msg, :class => key %>
      <% end -%>
    <% else -%>
      <%= content_tag :div, flash[key], :class => key %>
    <% end -%>
  <% end -%>
<% end -%>