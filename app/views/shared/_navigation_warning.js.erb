<%= javascript_tag nonce: true do %>
  var onbeforeunload_flag = false;

  // The following will set a warning message to be be shown to the user
  // if he intends to navigate away, and the onbeforeunload_flag is set.
  window.onbeforeunload = function() {
    if (onbeforeunload_flag) {
      return I18n.t('uncommitted_changes_warning');
    }
  };

  addEventListener("change", () => {
    onbeforeunload_flag = true
  })
<% end %>
