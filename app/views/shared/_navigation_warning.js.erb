<script>
  var onbeforeunload_flag = false;

  function set_onbeforeunload(value) {
    onbeforeunload_flag = value;
  }

  // The following will set a warning message to be be shown to the user
  // if he intends to navigate away, and the onbeforeunload_flag is set.
  window.onbeforeunload = function() {
    if (onbeforeunload_flag) {
      return "<%= t('uncommitted_changes_warning') %>";
    }
  };
</script>
